/*! For license information please see 8.dc2e34c067f14b93135b.chunk.min.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{259:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n(210),i=function(e){var t,n="readerChevron"+e.type+(e.uniqueId?e.uniqueId:""),i=e.chevronFadeOut||300,o="kw-button kw-rd-chevron-base "+(null===(t=e.extraClasses)||void 0===t?void 0:t.join(" "));return r.createElement(a.a,{mountOnEnter:!0,in:e.isVisible,timeout:i,classNames:"kw-overlay-fade"},r.createElement("button",{id:n,onClick:e.handleClick,onKeyUp:function(t){return e.handleKeyUp&&e.handleKeyUp(t)},className:o,style:e.style,tabIndex:e.tabIndex,"aria-label":e.ariaLabel},r.createElement("div",{className:"readerChevron-inner noselect"},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 26"},r.createElement("polyline",{fill:"none",stroke:"#000",points:"16 4 8 12 16 20"})))))}},261:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(4),a=n(53),i=n(0),o=n(56),l=n(2),c=n(211),s=n(240),u=function(e){var t="end-of-sample";return e&&(t+=" end-of-sample-inline"),t},d=Object(r.b)((function(e,t){var n,r,i;return{currentBindingSymbol:null===(n=e.litbBook.litbBook)||void 0===n?void 0:n.bindingSymbol,interactionManager:e.appState.interactionManager,isKuOrPrimeReading:e.buyBox.bookOffer&&e.buyBox.bookOffer.actionType===a.d.BORROW,isOwned:e.buyBox.bookOffer&&e.buyBox.bookOffer.isOwned,productEditionMetadata:null===(r=e.litbBook.litbBook)||void 0===r?void 0:r.productEditionMetadata,showEndOfSampleMessage:e.chromeOverlay.showEndOfSampleMessage||!!t.showEndOfSampleMessage,storeLink:null===(i=e.litbBook.litbBook)||void 0===i?void 0:i.productAsinStoreLink}}))((function(e){var t=Object(i.useRef)(null),n=Object(o.a)().getLitbTranslation;if(Object(i.useEffect)((function(){var n,r=null===(n=e.interactionManager)||void 0===n?void 0:n.anchorOnClick;t.current&&r&&t.current.querySelectorAll("a").forEach((function(e){Object(s.a)(e,r)}))}),[t.current]),e.showEndOfSampleMessage&&!e.isOwned){if(e.isKuOrPrimeReading)return i.createElement("div",{className:u(e.inline),tabIndex:0},i.createElement("h2",{className:"end-of-sample-title"},n("kw-litb-endactions-enjoyed-msg")),i.createElement("p",{className:"end-of-sample-details"},n("kw-litb-add-to-library-to-continue-reading")));if(e.storeLink&&e.productEditionMetadata){var r=Object(c.a)(n("kw-litb-buy-edition-to-continue-reading"),{showedEdition:n(Object(l.f)(e.currentBindingSymbol)),storePath:e.storeLink,requestedEdition:e.productEditionMetadata.binding});return i.createElement("div",{className:u(e.inline),tabIndex:0},i.createElement("h2",{className:"end-of-sample-title"},n("kw-litb-endactions-enjoyed-msg")),i.createElement("p",{className:"end-of-sample-details",dangerouslySetInnerHTML:{__html:r},ref:t}))}return i.createElement("div",{className:u(e.inline),tabIndex:0},i.createElement("h2",{className:"end-of-sample-title"},n("kw-litb-endactions-enjoyed-msg")),i.createElement("p",{className:"end-of-sample-details"},n("kw-litb-buy-to-continue-reading")))}return null}))},437:function(e,t,n){"use strict";n.r(t),n.d(t,"mapStateToProps",(function(){return C})),n.d(t,"mapDispatchToProps",(function(){return L})),n.d(t,"ConnectedInlineEndActions",(function(){return x}));var r,a=n(4),i=n(0),o=n(284),l=n.n(o),c=n(260),s=n(261),u=n(259),d=n(294),f=n(2),m=function(e){return i.createElement("ul",{className:"carousel","aria-live":"polite","aria-atomic":"true"},e.children.map((function(e){var t="carousel-element "+e.props.className;return i.cloneElement(e,{className:t})})))},v=n(39),b=n(249),h=n.n(b),p=n(56),E=n(77),O=n(211),g=n(8),y=n(5),w=n(3),N=n(1),S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},j=function(e,t,n){var r=S({key:t,className:"shoveler-group-container",id:"shoveler-group"+n,"data-group-index":n},1!==n&&{"aria-hidden":!0});return i.createElement("li",S({},r),i.createElement("div",{className:"shoveler-group"},e))},I=function(e,t,n,a){void 0===a&&(a=!1);var o=Object(y.c)(e.asin,e.format,e.revisionId),l=t(e),c=n(e);return i.createElement("div",{className:"shoveler-item",key:e.asin,title:l},i.createElement("div",{className:"shoveler-cover-container","aria-label":l},i.createElement("a",{href:o,target:"_parent",rel:"noreferrer noopener",onContextMenu:function(e){e.preventDefault()},onClick:function(t){t.preventDefault(),r&&(Object(w.recordCountMetric)(Object(w.getSuccessMetricName)(Object(N.d)(N.a.RECOMMENDATION_SHOVELER_ITEM_CLICKED,r)),1),Object(w.recordCountMetric)(Object(w.getSuccessMetricName)(Object(N.d)(N.a.RECOMMENDATION_SHOVELER_COVER_CLICKED,r)),1)),Object(g.l)(e.asin,e.revisionId,Object(f.i)(e.format))}},i.createElement("img",{className:"shoveler-cover",src:e.coverImage,alt:e.title,title:e.title}))),e.numberOfReviews>0&&i.createElement("div",{className:"rating-container shoveler-rating","aria-label":c},i.createElement("a",{target:"_parent",rel:"noreferrer noopener",href:e.customerReviewsUrl,onClick:function(){r&&(Object(w.recordCountMetric)(Object(w.getSuccessMetricName)(Object(N.d)(N.a.RECOMMENDATION_SHOVELER_ITEM_CLICKED,r)),1),Object(w.recordCountMetric)(Object(w.getSuccessMetricName)(Object(N.d)(N.a.RECOMMENDATION_SHOVELER_RATING_CLICKED,r)),1))}},i.createElement(d.a,{fullStarCount:e.fullStarCount,hasHalfStar:e.hasHalfStar,id:e.asin+"-rating"+(a?"-clone":""),numberOfStars:5}),i.createElement("span",{className:"rating-count shoveler-rating-count"},e.numberOfReviewsDisplayString))),i.createElement("div",{className:"shoveler-price-container"},e.priceDisplayString))},k=Object(a.b)((function(e){return{bookData:e.litbBook.litbBook,renderType:e.appState.renderType,shovelerData:e.litbBook.shovelerData,showInlineEndActions:e.chromeOverlay.showInlineEndActions}}))((function(e){var t=Object(p.a)().getLitbTranslation,n=Object(i.useState)(0),a=n[0],o=n[1],l=Object(i.useState)(0),c=l[0],s=l[1],d=Object(i.useState)(1),f=d[0],b=d[1],g=Object(i.useState)(!0),y=g[0],w=g[1],N=Object(i.useRef)(null),S=Object(i.useRef)(null);r=e.renderType;var k=h()((function(){if(e.shovelerData&&e.shovelerData.recsSamplesInfo&&N.current){var t=N.current.offsetWidth-80,n=e.shovelerData.recsSamplesInfo.length,r=Math.floor(t/107),a=Math.ceil(n/r),i=N.current.querySelector(".carousel");i.style.marginLeft=-N.current.offsetWidth+"px",i.dataset.numberOfPages=""+a,i.dataset.index="1",o(r),b(1),w(a>1)}}));if(Object(i.useEffect)((function(){k(),window.addEventListener("resize",k);var e=N.current;if(e){var t=e.querySelector(".carousel");t.addEventListener("transitionend",(function(){t.classList.remove("moving");var n=parseInt(""+t.dataset.index,10),r=parseInt(""+t.dataset.numberOfPages,10);if(s(r),n>r&&(t.style.marginLeft=-e.offsetWidth+"px",b(1),t.dataset.index="1"),n<1){var a=-e.offsetWidth*r;t.style.marginLeft=a+"px",b(r),t.dataset.index=""+r}var i=t.querySelectorAll(".shoveler-group-container");if(i){var o=t.dataset.index?parseInt(t.dataset.index,10):-1;i.forEach((function(e,t){o!==t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}))}}))}return function(){window.removeEventListener("resize",k)}}),[e.shovelerData]),Object(i.useEffect)((function(){e.showInlineEndActions&&k()}),[e.showInlineEndActions]),!e.shovelerData||!Object.keys(e.shovelerData).length||e.shovelerData&&e.shovelerData.recsSamplesInfo&&e.shovelerData.recsSamplesInfo.length<3)return null;var M,C,L=function(e,t,n,r){var a=[],i="",o=1,l=e.length%t==0?t:e.length%t,c=0===t?e.length:e.length-l,s=[],u=[];e.forEach((function(l,d){var f=d+1;if(d%t>0&&(i+="-"),i+=l.asin,a.push(I(l,n,r)),1===o||f>c&&f<=e.length){var m=1===o?0:1;u[m]||(u[m]=[]),u[m].push(I(l,n,r,!0))}if(a.length&&(f%t==0||f===e.length)){var v=j(a,i,o);s.push(v),a=[],i="",o++}}));var d=j(u[0],"first-clone",s.length+1),f=j(u[1],"last-clone",0);return s.push(d),s.unshift(f),s}(e.shovelerData.recsSamplesInfo,a,(function(e){var n=e.authorInfoList.map((function(e){return e.authorName})).join(", ");return Object(O.a)(t("kw-litb-shoveler-item-a11y-title"),{bookTitle:e.title,authorName:n,price:e.priceDisplayString})}),(function(e){return Object(O.a)(t("kw-litb-shoveler-item-a11y-rating"),{avgRating:""+e.averageRating,reviewCount:e.numberOfReviewsDisplayString})}));return i.createElement("div",{ref:N,className:(M=e.className,C="shoveler",M&&(C+=" "+M),C),"aria-labelledby":"shoveler-title"},i.createElement("h3",{id:"shoveler-title",className:"shoveler-title"},e.shovelerData.widgetTitle),i.createElement("div",{className:"shoveler-chevron-container shoveler-chevron-container-left"},i.createElement(u.a,{handleClick:function(){if(N.current){var e=N.current.querySelector(".carousel");if(e){e.classList.add("moving");var t=Object(E.f)(e)+N.current.offsetWidth,n=f-1;e.style.marginLeft=t+"px",e.dataset.index=""+n,b(n)}}},isVisible:y,type:v.d,uniqueId:"Shoveler",ariaLabel:t("kw-litb-previous-page")})),i.createElement("div",{className:"shoveler-chevron-container shoveler-chevron-container-right"},i.createElement(u.a,{handleClick:function(){if(N.current){var e=N.current.querySelector(".carousel");if(e){e.classList.add("moving");var t=Object(E.f)(e)-N.current.offsetWidth,n=f+1;e.style.marginLeft=t+"px",e.dataset.index=""+n,b(n)}}},isVisible:y,type:v.e,uniqueId:"Shoveler",ariaLabel:t("kw-litb-next-page")})),i.createElement("div",{ref:S,className:"carousel-live-accessibility","aria-live":"polite","aria-atomic":"true"},Object(O.a)(t("kw-litb-page-number")||"",{page:""+(f>=1&&f<=c?f:1),pages:""+(L.length-2)})),i.createElement("div",{className:"shoveler-carousel-container"},i.createElement(m,null,L)))})),M=n(13),C=function(e){return{showInlineEndActions:e.chromeOverlay.showInlineEndActions}},L=function(e){return{setShowInlineEndActions:function(t){return e(Object(M.b)(M.a.SET_SHOW_INLINE_END_ACTIONS,t))}}},x=Object(a.b)(C,L)((function(e){var t=Object(i.useRef)(null),n=Object(i.useState)(null),r=n[0],a=n[1];Object(i.useEffect)((function(){var n,r;t.current&&e.container&&a(new IntersectionObserver((n=e.setShowInlineEndActions,r=t.current,function(e){if(r){var t=l()(e,(function(e){return e.target.className===r.className}));t&&t.isIntersecting?n(!0):t&&!t.isIntersecting&&n(!1)}}),{root:e.container}))}),[t.current,e.container]),Object(i.useEffect)((function(){t.current&&r&&r.observe(t.current)}),[r,t.current]);var o,u;return e.container?i.createElement("section",{ref:t,className:(o=e.className,u="inline-end-actions",o&&(u+=" "+o),u)},e.showGradient?i.createElement("div",{className:"inline-end-actions-gradient"}):null,i.createElement(s.a,{showEndOfSampleMessage:!0,inline:!0}),i.createElement(c.a,{inline:!0,refTagPrefix:e.refTagPrefix,container:e.container}),i.createElement(k,{className:"recommendations"})):null}))}}]);